---
layout: single
title: eeepc 使用技巧(4) 看电视
date: 2008-07-09
categories:
  - 博客日记
tags:
  - 心情随笔
---

用小e在床头看电视在合适不过了，不过我没找到Linux下的网络电视软件。找来找去，发现一些可以用mplayer播放的mms链接，试了一下效果还不错，几个著名的电视台都有对应的链接，比如：凤凰卫视中文台mms&#58;//58.22.96.10/litv01;凤凰卫视资讯台mms&#58;//58.22.96.10/litv03;但是我的mplayer是基于命令行的，每次要看电视的时候还需把这些链接输入进去，感觉很不方便。刚好这两天对Python这个脚本语言比较感兴趣，于是想用Python写一个脚本来帮我输入这些链接。由于对Python还不熟，所以写的界面很丑，不过也够我用了。具体思路是，将这些链接首先存入一个文本文件里保存为channel.data，内容如下：凤凰卫视中文台|mms&#58;//58.22.96.10/litv01;凤凰卫视资讯台|mms&#58;//58.22.96.10/litv03;东风卫视|mms&#58;//58.22.96.10/litv07;精品影院|mms&#58;//218.1.70.72&#58;1755/JingPinYingYuan;东方卫视|mms&#58;//live.smgbb.cn/dfws;星空卫视|mms&#58;//58.22.96.10/litv06;TVB8|mms&#58;//58.22.96.10/litv05;然后写一个python脚本读取这些链接并将电视台的名称填入界面中的一个列表框里，到时候通过点击名称就可以播放了。python脚本内容如下：#!/usr/bin/envpython#-*-coding&#58;UTF-8-*-fromTkinterimport*importosimportstringclassApplication(Frame)&#58;&nbsp;&nbsp;&nbsp;clist=list(&#123;&#125;)&nbsp;&nbsp;&nbsp;defplay_channel(self,channelurl)&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strcmd=\'mplayer\'+channelurl+\'-cache1024\'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str=os.popen(strcmd).read()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a=str.split(\"\\")&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forbina&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printb&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printchannelurl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defplay_tv(self)&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printself.clist[int(self.channellistbox.curselection()[0])]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.play_channel(self.clist[int(self.channellistbox.curselection()[0])])&nbsp;&nbsp;&nbsp;definitchannellist(self,Listbox)&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channelfile=open(\'tvchannel.dat\',\'r\')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channelinfo=channelfile.readlines()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channelfile.close()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foriinrange(len(channelinfo))&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channellist=channelinfo[i].split(\';\')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forjinrange(len(channellist))&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channel=channellist[j].split(\'|\')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channelname=channel[0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;channelurl=channel[1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Listbox.insert(END,channelname)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.clist.append(channelurl)&nbsp;&nbsp;&nbsp;defcreateWidgets(self)&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.quitbutton=Button(self)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.quitbutton[\"text\"]=\"quit\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.quitbutton[\"command\"]=self.quit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.quitbutton[\"width\"]=30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.quitbutton[\"height\"]=10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.quitbutton.pack(&#123;\"side\"&#58;\"left\"&#125;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.playtv=Button(self)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.playtv[\"text\"]=\"playtv\",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.playtv[\"command\"]=self.play_tv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.playtv[\"width\"]=30&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.playtv[\"height\"]=10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.playtv.pack(&#123;\"side\"&#58;\"left\"&#125;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channellistbox=Listbox(self)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.initchannellist(self.channellistbox)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channellistbox.selection_set(0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.channellistbox.pack()&nbsp;&nbsp;&nbsp;def__init__(self,master=None)&#58;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Frame.__init__(self,master)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.pack()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.createWidgets()app=Application()app.mainloop()保存为playtv.py，和刚才那个channel.dat放在一个目录，运行即可（python./playtv.py)。
